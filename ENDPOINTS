
LOGIN

ENDPOINT: /api/auth/login

--Los datos del JSON son ejemplos solo deben coincidir el nombre de los atributos

Recibe el siguiente JSON:
{
  "correoElectronico": "usuario@example.com",
  "contrasenia": "TuPassword123"
}

Devuelve el siguiente JSON:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

Este es el token del usuario el cual se debe guardar en el fronted

Paciente

Para el registro se mostraran los Padecimientos ya existentes en el sistema

ENDPOINT /api/paciente/registrar/padecimientos

Devuelve el siguiente JSON:

[
    {
        "id": 1,
        "nombre": "Diabetes"
    },
    {
        "id": 2,
        "nombre": "Hipertensión"
    }
]

Para el registro tambien se mostraran las Alergias ya existentes en el sistema

ENDPOINT /api/paciente/registrar/alergias

Devuelve el siguiente JSON:

[
  {
    "id": 1,
    "nombre": "Penicilina"
  },
  {
    "id": 2,
    "nombre": "Ácido acetilsalicílico"
  },
  {
    "id": 3,
    "nombre": "Polen"
  }
]

Registro de Paciente

ENDPOINT: /api/paciente/registrar

Recibe el siguiente JSON:

{
  "registroPersonaRequest": {
    "nombre": "Juan",
    "apellidoM": "López",
    "apellidoP": "Martínez",
    "curp": "LOMJ990101HDFRXX09",
    "calle": "Av. Central",
    "colonia": "Centro",
    "numero": "123",
    "telefonos": [
      {
        "numero": "5512345678",
        "tipo": "MOVIL"
      },
      {
        "numero": "5576543210",
        "tipo": "CASA"
      }
    ]
  },
  "registroUsuarioRequest": {
    "correoElectronico": "juan@example.com",
    "contrasenia": "123456"
  },
  "idAlergias": [1, 3],                     -- En este caso son los ids de las alergias que ya tenemos en el sistema
  "nuevasAlergias": ["Polen", "Gluten"],    --Estas son alergias nuevas
  "padecimientos": [
    {
      "id": 10,                             --Este es el id de un Padecimiento que ya existe en el sistema
      "nombre": null,                         --En caso de que el padecimiento ya exista no es necesario pasarle el nombre
      "descripcion": "Dificultad respiratoria ocasional"
    },
    {
      "id": null,                             --Si el caso es es el contrario osea que el Padecimiento no existe se debe pasar el id como null
      "nombre": "Gastritis",                --Y en ese caso se pasa el nombre del padecimiento previo
      "descripcion": "Molestias estomacales frecuentes" --En cualquiera de los 2 casos se pasa la descripcion puesto que este depende del paciente
    }
  ],
  "historialMedico": {
    "peso": 70.5,
    "estatura": 1.75,
    "tipoSangre": "O_NEGATIVO" --Se debe pasar el tipo de sangre en este formato
  }
}

Devuelve el siguiente JSON:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

Obtener los datos de un paciente

ENDPOINT: /api/paciente/me

Recibe el siguiente HEADER:

Authorization: Bearer <token> --Este es el token que se da cuando inicia sesion o se registra un paciente

Devuelve el siguiente JSON:

{
  "persona": {
    "nombreCompleto": "Juan Martínez López",
    "curp": "LOMJ990101HDFRXX09",
    "direccion": "Av. Central #123, Centro",
    "telefonos": [
      {
        "numero": "5512345678",
        "tipo": "MOVIL"
      }
    ]
  },
  "email": "juan@example.com",
  "alergias": [
    "Polen",
    "Gluten",
    "Alergia registrada 1"
  ],
  "padecimientos": [
    {
      "id": 10,
      "nombre": "Asma",
      "descripcion": "Dificultad respiratoria ocasional"
    },
    {
      "id": 20,
      "nombre": "Gastritis",
      "descripcion": "Molestias estomacales frecuentes"
    }
  ],
  "historialMedico": {
    "peso": 70.5,
    "estatura": 1.75,
    "tipoSangre": "O_NEGATIVO"
  }
}


Registrar cita

1.- Mostrar todas las especialidades

ENDPOINT api/cita/especialidades
Recibe el header con Authorization: Bearer <token>

Devuelve un JSON:

[
  {
    "idEspecialidad": 1,
    "nombre": "Cardiología"
  },
  {
    "idEspecialidad": 2,
    "nombre": "Pediatría"
  },
  {
    "idEspecialidad": 3,
    "nombre": "Dermatología"
  }
]


2.- Mostrar Doctores de esa especialidad

ENDPOINT api/cita/especialidades/{idEspecialidad}/doctores
Recibe el id De la especialidad como Path Variable ej:  /api/especialidades/5/doctores
Recibe el header con Authorization: Bearer <token>

Devuelve el siguiente JSON:

[
  {
    "idDoctor": 12,
    "nombreCompleto": "Dr. Luis Gómez Ramírez",
    "especialidad": "Cardiología",
    "consultorio": 3
  },
  {
    "idDoctor": 18,
    "nombreCompleto": "Dra. Ana Torres Medina",
    "especialidad": "Cardiología",
    "consultorio": 7
  }
]


3.- Mostrar todas las fechas de ese doctor (incluye la excepcion de 48 horas y minimo 3 meses)

ENDPOINT:  api/cita/doctores/{idDoctor}/fechas-disponibles

Recibe el id del doctor como Path Variable ej:  api/cita/doctores/5/fechas-disponibles
Recibe el header con Authorization: Bearer <token>

Devuelve el siguiente JSON

[
  "2025-01-21",
  "2025-01-23",
  "2025-01-25",
  "2025-01-28",
  "2025-01-30"
]

4.- Mostrar todas las horas disponibles con ese Doctor ese dia (excluye las horas ya ocupadas por otras citas)

ENDPOINT:  api/cita/doctores/{idDoctor}/horarios/disponibles

Recibe el id del doctor como Path Variable y ademas la fecha como Query param ej:  /api/doctores/5/horarios/disponibles?fecha=2025-02-10
Recibe el header con Authorization: Bearer <token>
Devuelve el siguiente JSON:

[
  "08:00",
  "08:30",
  "09:00",
  "09:30",
  "10:00"
]


ENDPOINT: /api/cita/registrar

Ademas de recibir el header con el token
Recibe el siguiente JSON:

{
  "idDoctor": 5,
  "fechaCita": "2025-03-12T14:30:00"
}

Devuelve el siguiente JSON:

{
  "folioCita": 101,
  "nombrePaciente": "Juan Martínez López",
  "nombreDoctor": "Dr. Luis Gómez Ramírez",
  "especialdiad": "Cardiología",
  "Consultorio": 3,
  "fechaCita": "2025-12-15T09:30:00",
  "estatus": "AGENDADA_PENDIENTE_DE_PAGO"
}


Pagar Cita (Se genera una linea de pago si la cantidad de dinero pagado en una linea de pago es mayor que la de la orden de pago el estatus de la cita cambia pagado)

ENDPOINT: /api/paciente/orden/pagar

Recibe el token y el siguiente JSON:

{
  "folioCita": 101,
  "montoPago": 500.00
}

Devuelve el siguiente JSON:

{
  "folioPago": 1,
  "fechaPago": "2025-12-06T18:45:00",
  "montoPagado": 200.00,
  "ordenPagada": false,
  "idOrdenPago": 10,
  "montoTotalOrden": 500.00,
  "totalPagadoHastaAhora": 200.00
}

Obtener Citas de un Paciente con o sin filtros

ENDPOINT: /api/paciente/citas

Recibe el header con el token

Devuelve el siguiente JSON:

[
  {
    "folioCita": 101,
    "fechaCita": "2025-12-10T10:30:00",
    "estatus": "PAGADA_PENDIENTE_POR_ATENDER",
    "nombrePaciente": "Juan Pérez López",
    "nombreDoctor": "Ana Gómez",
    "especialidad": "Cardiología",
    "consultorio": 5,
    "costo": 500.00
  },
  {
    "folioCita": 102,
    "fechaCita": "2025-12-12T09:00:00",
    "estatus": "PAGADA_PENDIENTE_POR_ATENDER",
    "nombrePaciente": "Juan Pérez López",
    "nombreDoctor": "Luis Martínez",
    "especialidad": "Neurología",
    "consultorio": 3,
    "costo": 700.00
  }
]

ENDPOINT: /api/paciente/citas/estatus
Recibe: Header con el token, Query: ?estatus=PAGADA_PENDIENTE_POR_ATENDER
Devuelve el siguiente JSON:
[
{
"folioCita": 101,
"fechaCita": "2025-12-10T10:30:00",
"estatus": "PAGADA_PENDIENTE_POR_ATENDER",
"nombrePaciente": "Juan Pérez López",
"nombreDoctor": "Ana Gómez",
"especialidad": "Cardiología",
"consultorio": 5,
"costo": 500.00
},
{
"folioCita": 102,
"fechaCita": "2025-12-12T09:00:00",
"estatus": "PAGADA_PENDIENTE_POR_ATENDER",
"nombrePaciente": "Juan Pérez López",
"nombreDoctor": "Luis Martínez",
"especialidad": "Neurología",
"consultorio": 3,
"costo": 700.00
}
]

ENDPOINT: /api/paciente/citas/fechas
Recibe: Header con el token, Query: ?fechaInicio=2025-12-01&fechaFin=2025-12-31
Devuelve el siguiente JSON:
[
{
"folioCita": 103,
"fechaCita": "2025-12-05T14:00:00",
"estatus": "Cancelada",
"nombrePaciente": "Juan Pérez López",
"nombreDoctor": "Carla Ruiz",
"especialidad": "Pediatría",
"consultorio": 2,
"costo": 300.00
}
]

ENDPOINT: /api/paciente/citas/doctor
Recibe: Header con el token, Query: ?idDoctor=10
Devuelve el siguiente JSON:
[
{
"folioCita": 104,
"fechaCita": "2025-12-08T11:00:00",
"estatus": "Atendida",
"nombrePaciente": "Juan Pérez López",
"nombreDoctor": "Ana Gómez",
"especialidad": "Cardiología",
"consultorio": 5,
"costo": 500.00
}
]

Cancelar Cita

Enddpoint /api/paciente/cancelar/folioCita

devuevel un integer con el dinero devuelto

DOCTOR

Registrar Doctor (solo lo puede hacer una recepcionista por lo que en si lo ve la recepcionista no el doctor)

ENDPOINT: /api/doctor/registro

Recibe el siguiente JSON:

{
  "registroEmpleadoRequest": {
    "registroPersonaRequest": {
      "nombre": "Luis",
      "apellidoM": "Gómez",
      "apellidoP": "Ramírez",
      "curp": "GMRL850505HDFRXX07",
      "calle": "Calle 5",
      "colonia": "Las Palmas",
      "numero": "42",
      "telefonos": [
        {
          "numero": "5587654321",
          "tipo": "MOVIL"
        },
        {
          "numero": "5556781234",
          "tipo": "CASA"
        }
      ]
    },
    "registroUsuarioRequest": {
      "correoElectronico": "luis.ramirez@example.com",
      "contrasenia": "Doctor1234"
    },
    "salario": 25000.50
  },
  "cedulaProfesional": "12345678",
  "idConsultorio": 3,
  "idEspecialidad": 5
}

Devuelve el siguiente JSON:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

Obtener  Datos de un Doctor

ENDPOINT /api/doctor/me

Recibe el token en el header y devuelve un  json como el siguiente

{
    "persona": {
        "idPersona": 53,
        "nombreCompleto": "Carlos Hernández Lopez",
        "curp": "LOHC920315HDFRRT05",
        "direccion": "Avenida Central Jardines 87",
        "telefonos": [
            {
                "numero": "5512345678",
                "tipo": "MOVIL"
            },
            {
                "numero": "5543219987",
                "tipo": "CASA"
            }
        ]
    },
    "horarios": [
        {
            "dia": "LUNES",
            "hraEntrada": "09:00:00",
            "hraSalida": "17:00:00"
        },
        {
            "dia": "MARTES",
            "hraEntrada": "14:00:00",
            "hraSalida": "20:00:00"
        },
        {
            "dia": "MIERCOLES",
            "hraEntrada": "14:00:00",
            "hraSalida": "20:00:00"
        }
    ],
    "email": "carlos.lopez@example.com",
    "especialidad": "Medicina General",
    "Consultorio": 102,
    "cedulaProfesional": "98765432"
}



Agregar Horario a un Empleado

ENDPOINT:/api/recepcionista/{idEmpleado}/horarios

Recibe el idEmpleado como variable y el siguiente JSON

{
  "dia": "MIERCOLES", // Debe ser el nombre en mayusculas y en español
  "hraEntrada": "14:00",
  "hraSalida": "20:00"
}

Devuelve un String si todo sale bien

Mostrar las citas de un doctor solo se muestran las Pendientes y las que ya atendio


ENDPOINT: /api/doctor/citas

Solo recibe el token y devuelve el siguiente JSON:
[
    {
        "folioCita": 2,
        "fechaCita": "2025-12-10T15:00:00",
        "estatus": "PAGADA_PENDIENTE_POR_ATENDER",
        "nombrePaciente": "Ana María Torres García",
        "nombreDoctor": "Carlos Lopez",
        "especialidad": "Medicina General",
        "consultorio": 102,
        "costo": 700.00
    }
]

D
Mostrar las datos del paciente de una cita de un doctor


ENDPOINT: /api/doctor/citas/citas/{folioCita}/historialPaciente

Solo recibe el token y en el enpoint recibe el folio de la cita como parametro /citas/120/historialPaciente :

{
  "pacienteResponse": {
    "idPaciente": 51,
    "nombre": "Juan",
    "apellidoP": "Pérez",
    "apellidoM": "García",
    "curp": "PEGA900101HDFRZN01",
    "direccion": {
      "calle": "Av. Reforma",
      "numero": "123",
      "colonia": "Centro"
    },
    "usuario": {
      "correoElectronico": "juan.perez@example.com",
      "fechaCreacion": "2023-05-01T12:00:00"
    },
    "historialMedico": {
      "idHistorialMedico": 10,
      "peso": 70.5,
      "estatura": 1.75,
      "tipoSangre": "O+"
    }
  },
  "bitacora": [
    {
      "idHistorial": 1001,
      "fechaCita": "2025-12-01",
      "horaCita": "10:00",
      "doctor": "Carlos López Martínez",
      "especialidad": "Cardiología",
      "paciente": "Juan Pérez García",
      "consultorio": "101"
    },
    {
      "idHistorial": 1002,
      "fechaCita": "2025-12-05",
      "horaCita": "14:00",
      "doctor": "María Fernández Gómez",
      "especialidad": "Dermatología",
      "paciente": "Juan Pérez García",
      "consultorio": "104"
    }
  ]
}


Crear Receta solo se puede si ya es la hora y el dia indicado agregando 15 minutos mas de tolerancioa al final



ENDPOINT: /api/cita/doctor/receta

Recebe el token y el json:

{
  "folioCita": 3,
  "diagnostico": "Faringitis aguda bacteriana",
  "observaciones": "Se recomienda reposo absoluto por 3 días y aislamiento relativo.",
  "medicamentos": [
    {
      "nombre": "Amoxicilina 500mg",
      "tratamiento": "Tomar una tableta cada 8 horas por 7 días",
      "cantidad": 21
    },
    {
      "nombre": "Paracetamol 500mg",
      "tratamiento": "Tomar una tableta cada 8 horas en caso de fiebre o dolor",
      "cantidad": 10
    }
  ]
}

Devuelve
{
           "mensaje": "Receta generada y enviada correctamente.",
           "idReceta": 45
         }

Obtener PDF de la receta

ENDPOINT: /api/cita/doctor/receta/{id}/pdf

Recibe el token y el párametro de la receta  /api/cita/doctor/receta/1/pdf

Devuelve la receta en PDF
const imprimirReceta = async (idReceta) => {
    try {
        // 1. Haces la petición (Asegúrate de enviar el Token si usas seguridad)
        const token = localStorage.getItem('token'); // O donde guardes tu token

        const response = await fetch(`http://localhost:8080/doctor/receta/${idReceta}/pdf`, {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`, // ¡Importante!
            }
        });

        if (!response.ok) {
            throw new Error('Error al descargar la receta');
        }

        // 2. AQUÍ ESTÁ EL TRUCO: Conviertes la respuesta a "Blob" (Archivo binario)
        const blob = await response.blob();

        // 3. Creas una URL temporal en el navegador para ese archivo
        const url = window.URL.createObjectURL(blob);

        // 4. Abres esa URL en una nueva pestaña (el navegador mostrará el PDF)
        window.open(url, '_blank');

        // (Opcional) Limpiar la URL después de un rato para liberar memoria
        setTimeout(() => window.URL.revokeObjectURL(url), 100);

    } catch (error) {
        console.error("Error imprimiendo:", error);
        alert("No se pudo generar el PDF");
    }
};
XD

Paciente no acudio  a cita despuies de 1 hora y 15 minutos

ENDPOINT: /api/cita/cita/marcarAusencia/{folioCita}

Recibe el folioCita /marcarAusencia/{folioCita}

Devuelve string

Recetas del doctor

ENDPOINT: /api/doctor/recetas/historial
recibe token
devuelve
[
  {
    "folioReceta": 101,
    "pacienteNombre": "Juan Pérez",
    "doctorNombre": "Dr. Carlos López",
    "fechaEmision": "2025-12-08T09:00:00",
    "recetaRequest": {
      "medicamentos": [
        {
          "nombre": "Paracetamol",
          "dosis": "500mg",
          "frecuencia": "Cada 8 horas"
        },
        {
          "nombre": "Amoxicilina",
          "dosis": "250mg",
          "frecuencia": "Cada 12 horas"
        }
      ],
      "indicaciones": "Tomar con alimentos"
    }
  },
  {
    "folioReceta": 102,
    "pacienteNombre": "María López",
    "doctorNombre": "Dra. Ana García",
    "fechaEmision": "2025-12-08T10:30:00",
    "recetaRequest": {
      "medicamentos": [
        {
          "nombre": "Ibuprofeno",
          "dosis": "400mg",
          "frecuencia": "Cada 8 horas"
        }
      ],
      "indicaciones": "Evitar alcohol"
    }
  }
]


Recepcionista

Registro Recepcionista

ENDPOINT: /api/recepcionista/registro

Recibe el siguiente JSON:

{
  "registroPersonaRequest": {
    "nombre": "Luis",
    "apellidoM": "Gómez",
    "apellidoP": "Ramírez",
    "curp": "GMRL850505HDFRXX07",
    "calle": "Calle 5",
    "colonia": "Las Palmas",
    "numero": "42",
    "telefonos": [
      {
        "numero": "5587654321",
        "tipo": "MOVIL"
      }
    ]
  },
  "registroUsuarioRequest": {
    "correoElectronico": "luis.ramirez@example.com",
    "contrasenia": "Empleado123"
  },
  "salario": 18000.00
}

Devuelve el siguiente JSON:
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

